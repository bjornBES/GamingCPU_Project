INCLUDE HEADER
INCINIL C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\Filesystem.acl


SECTION HEADER
_BSS C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\dos.acl
_TEXT C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\dos.acl
_TEXT C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\Filesystem.acl


SYMBOLS HEADER
_REF_ LABEL DriveIndex,False.False C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\dos.acl
_REF_ LABEL _CStart_,False.False C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\dos.acl
_REF_ LABEL Entry,False.False C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\dos.acl
_REF_ LABEL _GetFileHandler,False.False C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\Filesystem.acl
_REF_ LABEL FindFileLoop,False.False C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\Filesystem.acl
_REF_ LABEL _GetEntres,False.False C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\Filesystem.acl
_REF_ LABEL MoveEntryesLoop,False.False C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\Filesystem.acl
_REF_ LABEL ExitMoveEntryes,False.False C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\Filesystem.acl
_REF_ LABEL _GetEntry,False.False C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\Filesystem.acl
_REF_ LABEL GetEntryLoop,False.False C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\Filesystem.acl
_REF_ LABEL _ReadRootDirectory,False.False C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\Filesystem.acl
_REF_ LABEL _ReadSector,False.False C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\Filesystem.acl
_REF_ LABEL Buffer,False.False C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\Filesystem.acl


TEXT HEADER
_NEWLINE_
_NEWLINE_
_FILE_ "C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\dos.acl"
_NEWLINE_
_NEWLINE_
_NEWLINE_
_SECTION_ BSS
_NEWLINE_
_REF_ LABEL DriveIndex C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\dos.acl
_NEWLINE_
_RES_ 0001
_NEWLINE_
_NEWLINE_
_SECTION_ TEXT
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_REF_ LABEL Entry C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\dos.acl
_NEWLINE_
_DEL_ mov [DriveIndex], DL
00
00
52
0f
_NEWARG_ [DriveIndex]
_SL_DriveIndex
_NEWARG_ DL
_NEWLINE_
_NEWLINE_
_DEL_ sez SP
0a
00
0a
_NEWARG_ SP
09
_NEWLINE_
_DEL_ mov FS, high @__BSSSTART
02
08
0a
01
_NEWARG_ FS
85
_NEWARG_ high @__BSSSTART
_SL___BSSSTART,MH
_NEWLINE_
_DEL_ mov DS, high @__DATASTART
02
08
0a
01
_NEWARG_ DS
05
_NEWARG_ high @__DATASTART
_SL___DATASTART,MH
_NEWLINE_
_NEWLINE_
_FILE_ "C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\Filesystem.acl"
_NEWLINE_
_NEWLINE_
_SECTION_ TEXT
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_REF_ LABEL _GetFileHandler C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\Filesystem.acl
_NEWLINE_
_DEL_ enter
f0
60
_NEWLINE_
_NEWLINE_
_DEL_ call [_ReadRootDirectory]
07
00
52
_NEWARG_ [_ReadRootDirectory]
_SL__ReadRootDirectory
_NEWLINE_
_DEL_ inc HL
20
f0
0a
_NEWARG_ HL
c7
_NEWLINE_
_NEWLINE_
_DEL_ mov DS, HIGH @Buffer
02
08
0a
01
_NEWARG_ DS
05
_NEWARG_ HIGH @Buffer
_SL_Buffer,MH
_NEWLINE_
_DEL_ mov B, LOW @Buffer
01
02
01
_NEWARG_ B
_NEWARG_ LOW @Buffer
_SL_Buffer,ML
_NEWLINE_
_NEWLINE_
_REF_ LABEL FindFileLoop C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\Filesystem.acl
_NEWLINE_
_DEL_ mov C, 15
01
03
01
_NEWARG_ C
_NEWARG_ 15
00
0f
_NEWLINE_
_DEL_ cmpl
40
10
_NEWLINE_
_DEL_ je
30
30
_NEWLINE_
_DEL_ add HL, word 0x20
20
20
0a
01
_NEWARG_ HL
c7
_NEWARG_ 0x20
00
20
_NEWLINE_
_NEWLINE_
_DEL_ leave
f0
70
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_REF_ LABEL _GetEntres C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\Filesystem.acl
_NEWLINE_
_DEL_ enter
f0
60
_NEWLINE_
_DEL_ push DS
05
00
0a
_NEWARG_ DS
05
_NEWLINE_
_NEWLINE_
_DEL_ mov AX, [BP - 18]
03
01
61
_NEWARG_ AX
_NEWARG_ [BP - 18]
ee
_NEWLINE_
_DEL_ push AX
05
00
20
_NEWARG_ AX
_NEWLINE_
_DEL_ call [_ReadSector]
07
00
52
_NEWARG_ [_ReadSector]
_SL__ReadSector
_NEWLINE_
_NEWLINE_
_DEL_ mov DS, HIGH @Buffer
02
08
0a
01
_NEWARG_ DS
05
_NEWARG_ HIGH @Buffer
_SL_Buffer,MH
_NEWLINE_
_DEL_ mov B, LOW @Buffer
01
02
01
_NEWARG_ B
_NEWARG_ LOW @Buffer
_SL_Buffer,ML
_NEWLINE_
_NEWLINE_
_REF_ LABEL MoveEntryesLoop C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\Filesystem.acl
_NEWLINE_
_DEL_ mov AX, [DS:B]
03
01
64
_NEWARG_ AX
_NEWARG_ [DS:B]
_NEWLINE_
_DEL_ jz [ExitMoveEntryes]
30
10
52
_NEWARG_ [ExitMoveEntryes]
_SL_ExitMoveEntryes
_NEWLINE_
_DEL_ mov [HL], AX
03
00
16
20
_NEWARG_ [HL]
_NEWARG_ AX
_NEWLINE_
_DEL_ add HL, 0x4
20
20
0a
03
_NEWARG_ HL
c7
_NEWARG_ 0x4
00
00
00
04
_NEWLINE_
_DEL_ add B, 0x4
20
20
11
01
_NEWARG_ B
_NEWARG_ 0x4
00
04
_NEWLINE_
_DEL_ jmp [MoveEntryesLoop]
30
00
52
_NEWARG_ [MoveEntryesLoop]
_SL_MoveEntryesLoop
_NEWLINE_
_REF_ LABEL ExitMoveEntryes C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\Filesystem.acl
_NEWLINE_
_NEWLINE_
_DEL_ pop DS
06
00
0a
_NEWARG_ DS
05
_NEWLINE_
_DEL_ leave
f0
70
_NEWLINE_
_DEL_ ret 4
08
00
00
_NEWARG_ 4
04
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_REF_ LABEL _GetEntry C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\Filesystem.acl
_NEWLINE_
_DEL_ enter
f0
60
_NEWLINE_
_NEWLINE_
_DEL_ mov HL, [BP - 24]
00
00
0a
61
_NEWARG_ HL
c7
_NEWARG_ [BP - 24]
e8
_NEWLINE_
_DEL_ mov DS, [BP - 18]
02
08
0a
61
_NEWARG_ DS
05
_NEWARG_ [BP - 18]
ee
_NEWLINE_
_DEL_ mov B, [BP - 20]
01
02
61
_NEWARG_ B
_NEWARG_ [BP - 20]
ec
_NEWLINE_
_DEL_ mov CL, 0x20
00
03
00
_NEWARG_ CL
_NEWARG_ 0x20
20
_NEWLINE_
_NEWLINE_
_REF_ LABEL GetEntryLoop C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\Filesystem.acl
_NEWLINE_
_DEL_ mov AX, [DS:B]
03
01
64
_NEWARG_ AX
_NEWARG_ [DS:B]
_NEWLINE_
_DEL_ mov [HL], AX
03
00
16
20
_NEWARG_ [HL]
_NEWARG_ AX
_NEWLINE_
_DEL_ sub CL, 4
20
30
0e
00
_NEWARG_ CL
_NEWARG_ 4
04
_NEWLINE_
_DEL_ jnz [GetEntryLoop]
30
11
52
_NEWARG_ [GetEntryLoop]
_SL_GetEntryLoop
_NEWLINE_
_NEWLINE_
_DEL_ popr
f0
30
_NEWLINE_
_DEL_ mov HL, [BP - 24]
00
00
0a
61
_NEWARG_ HL
c7
_NEWARG_ [BP - 24]
e8
_NEWLINE_
_DEL_ pop BP
06
00
0a
_NEWARG_ BP
08
_NEWLINE_
_DEL_ ret 8
08
00
00
_NEWARG_ 8
08
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_REF_ LABEL _ReadRootDirectory C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\Filesystem.acl
_NEWLINE_
_DEL_ pushr
f0
20
_NEWLINE_
_DEL_ sez A
0a
05
_NEWARG_ A
_NEWLINE_
_DEL_ mov B, 0x03
01
02
01
_NEWARG_ B
_NEWARG_ 0x03
00
03
_NEWLINE_
_DEL_ sez C
0a
07
_NEWARG_ C
_NEWLINE_
_DEL_ mov DL, [DriveIndex]
00
04
52
_NEWARG_ DL
_NEWARG_ [DriveIndex]
_SL_DriveIndex
_NEWLINE_
_DEL_ push AL
05
00
0c
_NEWARG_ AL
_NEWLINE_
_DEL_ push B
05
00
11
_NEWARG_ B
_NEWLINE_
_DEL_ push C
05
00
12
_NEWARG_ C
_NEWLINE_
_DEL_ push DL
05
00
0f
_NEWARG_ DL
_NEWLINE_
_DEL_ call [_ReadSector]
07
00
52
_NEWARG_ [_ReadSector]
_SL__ReadSector
_NEWLINE_
_DEL_ popr
f0
30
_NEWLINE_
_DEL_ retz
09
00
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_REF_ LABEL _ReadSector C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\Filesystem.acl
_NEWLINE_
_DEL_ enter
f0
60
_NEWLINE_
_NEWLINE_
_DEL_ mov AL, [BP - 23]
00
01
61
_NEWARG_ AL
_NEWARG_ [BP - 23]
e9
_NEWLINE_
_DEL_ mov B, [BP - 19]
01
02
61
_NEWARG_ B
_NEWARG_ [BP - 19]
ed
_NEWLINE_
_DEL_ mov C, [BP - 21]
01
03
61
_NEWARG_ C
_NEWARG_ [BP - 21]
eb
_NEWLINE_
_DEL_ mov DL, [BP - 18]
00
04
61
_NEWARG_ DL
_NEWARG_ [BP - 18]
ee
_NEWLINE_
_DEL_ mov HL, far @Buffer
00
00
0a
03
_NEWARG_ HL
c7
_NEWARG_ far @Buffer
_FL_Buffer
_NEWLINE_
_DEL_ mov AH, 0x01
01
00
0a
01
_NEWARG_ AH
40
_NEWARG_ 0x01
00
01
_NEWLINE_
_DEL_ int 0x13
f0
40
00
_NEWARG_ 0x13
13
_NEWLINE_
_NEWLINE_
_DEL_ leave
f0
70
_NEWLINE_
_DEL_ ret 6
08
00
00
_NEWARG_ 6
06
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_NEWLINE_
_REF_ LABEL Buffer C:\Users\bjorn\Desktop\VideoProjects\GamingCPU_Project\src\DOS\src\DOS\Filesystem.acl
_NEWLINE_
_RES_ 0200
_NEWLINE_
_RES_ 0200
_NEWLINE_
